/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var f=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var F=(o,e)=>{for(var r in e)f(o,r,{get:e[r],enumerable:!0})},P=(o,e,r,d)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of u(e))!m.call(o,a)&&a!==r&&f(o,a,{get:()=>e[a],enumerable:!(d=g(e,a))||d.enumerable});return o};var D=o=>P(f({},"__esModule",{value:!0}),o);var v={};F(v,{default:()=>p});module.exports=D(v);var t=require("obsidian"),p=class extends t.Plugin{async onload(){this.addCommand({id:"download-PDF-files-in-all-documents",name:"download PDF files in all documents",callback:async()=>{try{let e=this.app.vault.getMarkdownFiles(),r=/\[[^\[]*\]\((https:\/\/.*\.pdf)\)/gm,d=/([\S\s]*)\//g,a=/([^\/]*\.pdf)$/g,w=/(\[[^\[]*\])\(https:\/\/.*\.pdf\)/;for(let s in e){let n=await this.app.vault.read(e[s]);r.test(n)&&(n.match(r),Promise.all([...n.matchAll(r)].map(async h=>{let l=h[1],i="";if(String(e[s].path.match(d))=="null")i=String(l.match(a));else{if(String(l.match(a))=="null")throw new Error(String(l)+" is not able to generate valid filename/filepath");i=String(e[s].path.match(d))+String(l.match(a))}if(this.app.vault.getAbstractFileByPath(i)instanceof t.TFile)this.app.vault.getAbstractFileByPath(i)instanceof t.TFile&&(n=n.replace(w,"$1("+i.replace(/ /g,"%20")+")"));else try{let c=await(0,t.requestUrl)({url:l});c.arrayBuffer!=null&&(this.app.vault.createBinary(i,c.arrayBuffer),n=n.replace(w,"$1("+i.replace(/ /g,"%20")+")"),new t.Notice("downloadPDF: pdf file downloaded + created: "+i.replace(/ /g,"%20")))}catch(c){switch(String(c)){case"Error: net::ERR_NAME_NOT_RESOLVED":try{await(0,t.requestUrl)("https://www.frieda-universe.de")!=null&&(new t.Notice(`downloadPDF: Wrong link:
`+l),console.error(`downloadPDF: Wrong link:
`+l))}catch(y){new t.Notice("downloadPDF: No internet connection"),console.error("downloadPDF: No internet connection")}break;case"Error: Request failed, status 404":new t.Notice(`downloadPDF: File not avaiveble/Wrong link:
`+l),console.error(`downloadPDF: File not avaiveble/Wrong link:
`+l);break;default:console.error('downloadPDF:  "'+c+'" ,pls report the bug <3'),new t.Notice('downloadPDF: "'+c+'" ,pls report the bug <3')}}})).then(async h=>{h&&await this.app.vault.read(e[s])!=n&&(this.app.vault.modify(e[s],n),new t.Notice("downloadPDF: modified: "+e[s].name))}))}}catch(e){console.error('downloadPDF:  "'+e+'" ,pls report the bug <3'),new t.Notice('downloadPDF: "'+e+'" ,pls report the bug <3')}}})}};

/* nosourcemap */